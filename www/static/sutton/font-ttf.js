/* Sutton SignWriting TrueType Font Module v1.5.0 (https://github.com/sutton-signwriting/font-ttf), author: Steve Slevinski (https://SteveSlevinski.me), license: MIT */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).ssw=t.ssw||{},t.ssw.ttf={}))}(this,(function(t){"use strict";let e={};const o=152;let l;const i=function(t){if(t in e)return[...e[t]];if(!l){const t=document.createElement("canvas");t.width=o,t.height=o,l=t.getContext("2d",{willReadFrequently:!0})}l.clearRect(0,0,o,o),l.font="60px 'SuttonSignWritingLine'",l.fillText(String.fromCodePoint(t+983040),0,0);const i=l.getImageData(0,0,o,o).data;let n,s,a,r;t:for(n=151;n>=0;n--)for(s=0;s<o;s+=1)for(r=0;r<4;r+=1)if(a=4*n+4*s*o+r,i[a])break t;var d=n;t:for(s=151;s>=0;s--)for(n=0;n<d;n+=1)for(r=0;r<4;r+=1)if(a=4*n+4*s*o+r,i[a])break t;var c=s+1;if(d=Math.ceil(d/2),c=Math.ceil(c/2),14394==t&&(d=19),[10468,10480,10496,10512,10500,10532,10548,10862,10878,10894,11058,11074,11476,11488,11492,11504,11508,11520,10516,10910,10926,11042,11082,10942].includes(t)&&(d=20),31921==t&&(d=22),38460==t&&(d=23),[20164,20212].includes(t)&&(d=25),31894==t&&(d=28),46698==t&&(d=29),29606==t&&(d=30),44855==t&&(d=40),32667==t&&(d=50),[11088,11474,11490,11506].includes(t)&&(c=20),6285==t&&(c=21),40804==t&&(c=31),41475==t&&(c=36),0==d&&0==c){const e={9:[15,30],10:[21,30],11:[30,15],12:[30,21],13:[15,30],14:[21,30]};t in e&&(d=e[t][0],c=e[t][1])}return 0!=d||0!=c?(e[t]=[d,c],[d,c]):void 0},n=function(t){return String.fromCodePoint(t+983040)},s=function(t){return String.fromCodePoint(t+1048576)},a=function(t){return`    <text class="sym-fill" fill="white" style="pointer-events:none;font-family:'SuttonSignWritingFill';font-size:30px;">${s(t)}</text>\n    <text class="sym-line" fill="black" style="pointer-events:none;font-family:'SuttonSignWritingLine';font-size:30px;">${n(t)}</text>`},r=function(t){if(i(1))t();else{const e=setInterval((function(){i(1)&&(clearInterval(e),t())}),100)}},d=function(t){const e=function(){const t=document.createElement("canvas");t.width=15,t.height=30;const e=t.getContext("2d");e.font="30px 'SuttonSignWritingFill'",e.fillText(s(1),0,0);return!e.getImageData(0,0,15,30).data.every((t=>0===t))};if(e())t();else{const o=setInterval((function(){e()&&(clearInterval(o),t())}),100)}};var c=Object.freeze({__proto__:null,cssAppend:function(t=""){if(!document.getElementById("SgnwFontCss")){const e=document.createElement("style");e.setAttribute("id","SgnwFontCss"),e.appendChild(document.createTextNode(`\n  @font-face {\n    font-family: "SuttonSignWritingLine";\n    src: \n      local('SuttonSignWritingLine'),\n      ${t?`url('${t}SuttonSignWritingLine.ttf') format('truetype'),`:""}\n      url('https://cdn.jsdelivr.net/npm/@sutton-signwriting/font-ttf@1.0.0/font/SuttonSignWritingLine.ttf') format('truetype');\n  }\n  @font-face {\n    font-family: "SuttonSignWritingFill";\n    src: \n      local('SuttonSignWritingFill'),\n      ${t?`url('${t}SuttonSignWritingFill.ttf') format('truetype'),`:""}\n      url('https://cdn.jsdelivr.net/npm/@sutton-signwriting/font-ttf@1.0.0/font/SuttonSignWritingFill.ttf') format('truetype');\n  }\n  @font-face {\n    font-family: "SuttonSignWritingOneD";\n    src: \n      local('SuttonSignWritingOneD'),\n      ${t?`url('${t}SuttonSignWritingOneD.ttf') format('truetype'),`:""}\n      url('https://cdn.jsdelivr.net/npm/@sutton-signwriting/font-ttf@1.0.0/font/SuttonSignWritingOneD.ttf') format('truetype');\n  }\n    `)),document.head.appendChild(e)}},cssLoaded:function(t){let e=!1,o=!1;r((()=>{e=!0})),d((()=>{o=!0}));const l=setInterval((function(){e&&o&&(clearInterval(l),t())}),100)},cssLoadedLine:r,cssLoadedFill:d,symbolSize:i,symbolLine:n,symbolFill:s,symbolText:a});const m=t=>t.map((t=>(t=>String.fromCodePoint(120844+parseInt(t)-250))(t))).join(""),g=t=>parseInt(t.codePointAt(0)),p=t=>g(t)-262144,f=t=>1+96*(parseInt(t.slice(1,4),16)-256)+16*parseInt(t.slice(4,5),16)+parseInt(t.slice(5,6),16),y=t=>{const e=g(t)-262145,o=parseInt(e/96),l=parseInt((e-96*o)/16),i=parseInt(e-96*o-16*l);return"S"+(o+256).toString(16)+l.toString(16)+i.toString(16)},u=t=>{return e=262145+96*(parseInt(t.slice(1,4),16)-256)+16*parseInt(t.slice(4,5),16)+parseInt(t.slice(5,6),16),String.fromCodePoint(e);var e};let b={symbol:"S[123][0-9a-f]{2}[0-5][0-9a-f]",coord:"[0-9]{3}x[0-9]{3}",sort:"A",box:"[BLMR]"};b.prefix=`(?:${b.sort}(?:${b.symbol})+)`,b.spatial=`${b.symbol}${b.coord}`,b.signbox=`${b.box}${b.coord}(?:${b.spatial})*`,b.sign=`${b.prefix}?${b.signbox}`,b.sortable=`${b.prefix}${b.signbox}`;let h={colorize:"C",colorhex:"(?:[0-9a-fA-F]{3}){1,2}",colorname:"[a-zA-Z]+",padding:"P[0-9]{2}",zoom:"Z(?:[0-9]+(?:\\.[0-9]+)?|x)",classbase:"-?[_a-zA-Z][_a-zA-Z0-9-]{0,100}",id:"[a-zA-Z][_a-zA-Z0-9-]{0,100}"};h.colorbase=`(?:${h.colorhex}|${h.colorname})`,h.color=`_${h.colorbase}_`,h.colors=`_${h.colorbase}(?:,${h.colorbase})?_`,h.background=`G${h.color}`,h.detail=`D${h.colors}`,h.detailsym=`D[0-9]{2}${h.colors}`,h.classes=`${h.classbase}(?: ${h.classbase})*`,h.full=`-(${h.colorize})?(${h.padding})?(${h.background})?(${h.detail})?(${h.zoom})?(?:-((?:${h.detailsym})*))?(?:-(${h.classes})?!(?:(${h.id})!)?)?`;const x=t=>(new RegExp(`^${h.colorhex}$`).test(t)?"#":"")+t,$=t=>{const e=`^${h.full}`,o=("string"==typeof t?t.match(new RegExp(e)):[])||[];return l={colorize:o[1]?!!o[1]:void 0,padding:o[2]?parseInt(o[2].slice(1)):void 0,background:o[3]?x(o[3].slice(2,-1)):void 0,detail:o[4]?o[4].slice(2,-1).split(",").map(x):void 0,zoom:o[5]?"Zx"===o[5]?"x":parseFloat(o[5].slice(1)):void 0,detailsym:o[6]?o[6].match(new RegExp(h.detailsym,"g")).map((t=>{const e=t.split("_"),o=e[1].split(",").map(x);return{index:parseInt(e[0].slice(1)),detail:o}})):void 0,classes:o[7]?o[7]:void 0,id:o[8]?o[8]:void 0},Object.fromEntries(Object.entries(l).filter((([t,e])=>void 0!==e)));var l},v=t=>t.split("x").map((t=>parseInt(t))),w=t=>{const e=`^(${b.symbol})(${b.coord})?(${h.full})?`,o="string"==typeof t?t.match(new RegExp(e)):void 0;return{symbol:o?o[1]:void 0,coord:o&&o[2]?v(o[2]):void 0,style:o?o[3]:void 0}},z=t=>{const e=`^(${b.prefix})?(${b.signbox})(${h.full})?`,o="string"==typeof t?t.match(new RegExp(e)):void 0;return o?{sequence:o[1]?o[1].slice(1).match(/.{6}/g):void 0,box:o[2][0],max:v(o[2].slice(1,8)),spatials:o[2].length<9?void 0:o[2].slice(8).match(/(.{13})/g).map((t=>({symbol:t.slice(0,6),coord:[parseInt(t.slice(6,9)),parseInt(t.slice(10,13))]}))),style:o[3]}:{}},S=t=>{if("string"!=typeof t)return[];const e=`(${b.sign}(${h.full})?|${b.spatial}(${h.full})?)`,o=t.match(new RegExp(e,"g"));return o?[...o]:[]},I=t=>{if("string"==typeof t.symbol){const e=(t.symbol.match(b.symbol)||[""])[0];if(e){return e+((((t.coord&&t.coord[0]||"").toString()+"x"+(t.coord&&t.coord[1]||"").toString()).match(b.coord)||[""])[0]||"")+("string"==typeof t.style&&(t.style.match(h.full)||[""])[0]||"")}}},k=t=>{let e,o,l,i,n,s,a,r,d=z(t);d.spatials?(i=Math.min(...d.spatials.map((t=>t.coord[0]))),n=d.max[0],e=n-i,s=Math.min(...d.spatials.map((t=>t.coord[1]))),a=d.max[1],o=a-s,l="sign",r=d.box):(d=w(t),r="M",d.coord?(i=d.coord[0],e=2*(500-i),s=d.coord[1],o=2*(500-s),l="symbol"):(i=490,e=20,s=490,o=20,l="none"));let c=$(d.style),m=c.zoom||1,g=c.padding||0;return{minX:i,minY:s,width:e,height:o,segment:l,lane:{B:0,L:-1,M:0,R:1}[r],padding:g,zoom:m}},_={height:500,width:150,offset:50,pad:20,margin:5,dynamic:!1,background:void 0,punctuation:{spacing:!0,pad:30,pull:!0},style:{detail:["black","white"],zoom:1}},j=(t,e)=>{if("string"!=typeof t)return{};const o=(t=>("object"!=typeof t&&(t={}),{..._,...t,punctuation:{..._.punctuation,...t.punctuation},style:{..._.style,...t.style}}))(e);let l=S(t),i=0,n=[],s=[],a=0,r=parseInt(o.width/2),d=o.height-o.margin,c=!0,m=!1;for(let t of l){let e=k(t);i+=a,o.punctuation.spacing?i+="sign"==e.segment?o.pad:0:i+=o.pad,m=i+e.height>d,m&&"symbol"==e.segment&&o.punctuation.pull&&c&&(m=!1,c=!1),0==s.length&&(m=!1),m&&(i=o.pad,n.push(s),s=[],c=!0),s.push(Object.assign(e,{x:r+o.offset*e.lane-(500-e.minX)*e.zoom*o.style.zoom,y:i,text:t})),i+=e.height*e.zoom*o.style.zoom,a=o.punctuation.spacing?"sign"==e.segment?o.pad:o.punctuation.pad:o.pad}if(s.length&&n.push(s),o.punctuation.pull)for(let t of n){let e=t[t.length-1],l=e.y+e.height-(o.height-o.margin);if(l>0){let e=parseInt(l/t.length)+1;for(let o in t)t[o].y-=e*o+e}}let g=[];for(let t of n){let e=[r-o.offset-o.pad],l=[r+o.offset+o.pad];for(let i of t)e.push(i.x-o.pad),l.push(i.x+i.width+o.pad);e=Math.min(...e),l=Math.max(...l);let i=o.width,n=0;o.dynamic?(i=l-e,n=-e):n=r-parseInt((e+l)/2);for(let e of t)e.x+=n;g.push(i)}return{options:o,widths:g,columns:n}},E=[256,517,759,767,877,895,903],F=[767,876],M=[767,885],C=["#0000CC","#CC0000","#FF0099","#006600","#000000","#884411","#FF9900"],R=t=>{const e=w(t);let o="#000000";if(e.symbol){const t=parseInt(e.symbol.slice(1,4),16),l=E.findIndex((e=>e>t));o=C[l<0?6:l-1]}return o},W=function(t){if(w(t).symbol)return i(f(t))},A=function(t){return n(f(t))},L=function(t){return s(f(t))},O=function(t){return a(f(t))};let P={colorize:"C",colorhex:"(?:[0-9a-fA-F]{3}){1,2}",colorname:"[a-zA-Z]+",padding:"P[0-9]{2}",zoom:"Z(?:[0-9]+(?:\\.[0-9]+)?|x)",classbase:"-?[_a-zA-Z][_a-zA-Z0-9-]{0,100}",id:"[a-zA-Z][_a-zA-Z0-9-]{0,100}"};P.colorbase=`(?:${P.colorhex}|${P.colorname})`,P.color=`_${P.colorbase}_`,P.colors=`_${P.colorbase}(?:,${P.colorbase})?_`,P.background=`G${P.color}`,P.detail=`D${P.colors}`,P.detailsym=`D[0-9]{2}${P.colors}`,P.classes=`${P.classbase}(?: ${P.classbase})*`,P.full=`-(${P.colorize})?(${P.padding})?(${P.background})?(${P.detail})?(${P.zoom})?(?:-((?:${P.detailsym})*))?(?:-(${P.classes})?!(?:(${P.id})!)?)?`;const Z=t=>(new RegExp(`^${P.colorhex}$`).test(t)?"#":"")+t,D=t=>{const e=`^${P.full}`,o=("string"==typeof t?t.match(new RegExp(e)):[])||[];return l={colorize:o[1]?!!o[1]:void 0,padding:o[2]?parseInt(o[2].slice(1)):void 0,background:o[3]?Z(o[3].slice(2,-1)):void 0,detail:o[4]?o[4].slice(2,-1).split(",").map(Z):void 0,zoom:o[5]?"Zx"===o[5]?"x":parseFloat(o[5].slice(1)):void 0,detailsym:o[6]?o[6].match(new RegExp(P.detailsym,"g")).map((t=>{const e=t.split("_"),o=e[1].split(",").map(Z);return{index:parseInt(e[0].slice(1)),detail:o}})):void 0,classes:o[7]?o[7]:void 0,id:o[8]?o[8]:void 0},Object.fromEntries(Object.entries(l).filter((([t,e])=>void 0!==e)));var l},T=t=>{if("object"!=typeof t||null===t)return;let e="-";e+=t.colorize?"C":"";const o=parseInt(t.padding);e+=!o||o<=0||o>99?"":"P"+(o>9?o:"0"+o);const l=t.background&&"string"==typeof t.background?t.background.match(P.colorbase)[0]:void 0;e+=l?"G_"+l+"_":"";const i=t.detail&&t.detail[0]&&"string"==typeof t.detail[0]?t.detail[0].match(P.colorbase)[0]:void 0,n=t.detail&&t.detail[1]&&"string"==typeof t.detail[1]?t.detail[1].match(P.colorbase)[0]:void 0;i&&(e+="D_"+i,n&&(e+=","+n),e+="_");const s="x"===t.zoom?"x":parseFloat(t.zoom);e+=!s||s<=0?"":"Z"+s;let a="";const r=t.detailsym&&Array.isArray(t.detailsym)?t.detailsym.map((t=>{const e=parseInt(t.index);if(!e||e<=0||e>99)return"";let o="D"+(e>9?e:"0"+e);const l=t.detail&&t.detail[0]?t.detail[0].match(P.colorbase)[0]:void 0,i=t.detail&&t.detail[1]?t.detail[1].match(P.colorbase)[0]:void 0;return l&&(o+="_"+l,i&&(o+=","+i),o+="_"),o})):[];a+=r.join("");let d="";const c=t.classes&&"string"==typeof t.classes?t.classes.match(P.classes)[0]:void 0;d+=c||"";const m=t.id&&"string"==typeof t.id?t.id.match(P.id)[0]:void 0;return d+=c||m?"!":"",d+=m?m+"!":"",e+(a||d?"-"+a:"")+(d?"-"+d:"")},B=t=>{const e=w(t);if(!e.symbol)return"";let o,l,i,n,s=D(e.style);if(e.coord)o=e.coord[0],l=e.coord[1],i=500-o+500,n=500-l+500;else{let t=W(e.symbol);if(!t)return"";o=500-parseInt((t[0]+1)/2),l=500-parseInt((t[1]+1)/2),i=500-o+500,n=500-l+500}let a,r=O(e.symbol);r=`  <g transform="translate(${o},${l})">\n${r}\n  </g>`,s.colorize?a=R(e.symbol):s.detail&&(a=s.detail[0]),a&&(r=r.replace(/class="sym-line" fill="black"/,`class="sym-line" fill="${a}"`));let d=s.detail&&s.detail[1];d&&(r=r.replace(/class="sym-fill" fill="white"/,`class="sym-fill" fill="${d}"`));let c="";return s.padding&&(o-=s.padding,l-=s.padding,i+=s.padding,n+=s.padding),s.background&&(c=`\n  <rect x="${o}" y="${l}" width="${i-o}" height="${n-l}" style="fill:${s.background};" />`),`  <text font-size="0">${t}</text>${c}\n${r}`},X=t=>{let e=z(t);if(e.spatials){let o=D(e.style);o.detailsym&&o.detailsym.forEach((t=>{e.spatials[t.index-1]&&(e.spatials[t.index-1].detail=t.detail)}));let l=Math.min(...e.spatials.map((t=>t.coord[0]))),i=Math.min(...e.spatials.map((t=>t.coord[1]))),n=e.max[0],s=e.max[1],a="";o.padding&&(l-=o.padding,i-=o.padding,n+=o.padding,s+=o.padding),o.background&&(a=`\n  <rect x="${l}" y="${i}" width="${n-l}" height="${s-i}" style="fill:${o.background};" />`);let r=`  <text font-size="0">${t}</text>${a}`;const d=o.detail&&o.detail[0],c=o.detail&&o.detail[1];return r+="\n"+e.spatials.map((t=>{let e=O(t.symbol),l=d;t.detail?l=t.detail[0]:o.colorize&&(l=R(t.symbol)),l&&(e=e.replace(/class="sym-line" fill="black"/,`class="sym-line" fill="${l}"`));let i=c;return t.detail&&t.detail[1]&&(i=t.detail[1]),i&&(e=e.replace(/class="sym-fill" fill="white"/,`class="sym-fill" fill="${i}"`)),`  <g transform="translate(${t.coord[0]},${t.coord[1]})">\n${e}\n  </g>`})).join("\n"),r}return""},Y=(t,e)=>{"object"!=typeof e&&(e={});const o=Object.assign(_,e);let l=o.width,i=o.height,n="";o.background&&(n=`\n  <rect x="0" y="0" width="${l-0}" height="${i-0}" style="fill:${o.background};" />`);let s=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg"${` width="${o.width}" height="${o.height}"`} viewBox="0 0 ${l-0} ${i-0}">\n  ${n}`;return s+=t.map((t=>{const e=t.text.indexOf("-");if(e>0){const l=t.text.substring(e),i={...o.style,...D(l)};t.text=t.text.replace(l,T(i))}else t.text+=T(o.style);return t.zoom=t.zoom*o.style.zoom,'<g transform="translate('+t.x+","+t.y+") scale("+t.zoom+") translate("+-t.minX+","+-t.minY+') ">'+("sign"==t.segment?X(t.text):B(t.text))+"</g>"})).join("\n"),s+="\n</svg>",s},q=(t,e)=>{const o=function(t,e){"object"!=typeof e&&(e={});const o=Object.assign(_,e),l=document.createElement("canvas");l.width=o.width,l.height=o.height;const i=l.getContext("2d");return o.background&&(i.rect(0,0,o.width,o.height),i.fillStyle=o.background,i.fill()),t.map((t=>{const e=t.text.indexOf("-");if(e>0){const l=t.text.substring(e),i={...o.style,...D(l)};t.text=t.text.replace(l,T(i))}else t.text+=T(o.style);t.zoom=t.zoom*o.style.zoom;let l={};if("sign"==t.segment)l=z(t.text);else{let e=w(t.text);l.style=e.style,l.spatials=[e]}let n=D(l.style);n.background&&(i.fillStyle=n.background,i.fillRect(t.x-n.padding*t.zoom,t.y-n.padding*t.zoom,(t.width+2*n.padding)*t.zoom,(t.height+2*n.padding)*t.zoom)),n.detailsym&&n.detailsym.forEach((t=>{l.spatials[t.index-1]&&(l.spatials[t.index-1].detail=t.detail)}));const s=n.detail&&n.detail[0]||"black",a=n.detail&&n.detail[1]||"white";l.spatials.forEach((e=>{let o=s;e.detail?o=e.detail[0]:n.colorize&&(o=R(e.symbol));let l=a;e.detail&&e.detail[1]&&(l=e.detail[1]),i.font=30*t.zoom+"px 'SuttonSignWritingFill'",i.fillStyle=l,i.fillText(L(e.symbol),t.x+(e.coord[0]-t.minX)*t.zoom,t.y+(e.coord[1]-t.minY)*t.zoom),i.font=30*t.zoom+"px 'SuttonSignWritingLine'",i.fillStyle=o,i.fillText(A(e.symbol),t.x+(e.coord[0]-t.minX)*t.zoom,t.y+(e.coord[1]-t.minY)*t.zoom)}))})),l}(t,e),l=o.toDataURL("image/png");return o.remove(),l};var U=Object.freeze({__proto__:null,symbolSize:W,symbolLine:A,symbolFill:L,symbolText:O,symbolSvgBody:B,symbolSvg:t=>{const e=w(t),o='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="1" height="1"></svg>';if(!e.symbol)return o;let l,i,n,s,a=D(e.style);if(e.coord)l=e.coord[0],i=e.coord[1],n=500-l+500,s=500-i+500;else{let t=W(e.symbol);if(!t)return o;l=parseInt(500-t[0]/2),i=parseInt(500-t[1]/2),n=l+t[0],s=i+t[1]}let r="";a.classes&&(r=` class="${a.classes}"`);let d="";a.id&&(d=` id="${a.id}"`),a.padding&&(l-=a.padding,i-=a.padding,n+=a.padding,s+=a.padding);let c="";return"x"!=a.zoom&&(c=` width="${(n-l)*(a.zoom?a.zoom:1)}" height="${(s-i)*(a.zoom?a.zoom:1)}"`),`<svg${r}${d} version="1.1" xmlns="http://www.w3.org/2000/svg"${c} viewBox="${l} ${i} ${n-l} ${s-i}">\n${B(t)}\n</svg>`},symbolPng:t=>{const e=function(t){const e=w(t);if(e.symbol){let t=W(e.symbol);if(t){const o=document.createElement("canvas"),l=o.getContext("2d");let i=D(e.style),n="black";i.colorize?n=R(e.symbol):i.detail&&(n=i.detail[0]);let s=i.detail&&i.detail[1]||"white",a=500,r=a+t[0],d=500,c=d+t[1];i.padding&&(a-=i.padding,d-=i.padding,r+=i.padding,c+=i.padding);let m=1;"x"!=i.zoom&&(m=i.zoom);let g=(r-a)*m,p=(c-d)*m;return o.width=g||1,o.height=p||1,i.background&&(l.rect(0,0,g,p),l.fillStyle=i.background,l.fill()),l.font=30*m+"px 'SuttonSignWritingFill'",l.fillStyle=s,l.fillText(L(e.symbol),(500-a)*m,(500-d)*m),l.font=30*m+"px 'SuttonSignWritingLine'",l.fillStyle=n,l.fillText(A(e.symbol),(500-a)*m,(500-d)*m),o}}}(t),o=e.toDataURL("image/png");return e.remove(),o},symbolNormalize:t=>{const e=w(t);if(!e.symbol)return null;{let t=W(e.symbol);if(t)return`${e.symbol}${500-parseInt((t[0]+1)/2)}x${500-parseInt((t[1]+1)/2)}${e.style||""}`}},symbolMirror:t=>{let e=w(t);if(!e.symbol)return t;if(!W(e.symbol))return t;const o=e.symbol.slice(0,4);let l=e.symbol.slice(4,5),i=parseInt(e.symbol.slice(5,6),16);const n=o+"18";var s;W(o+"08")||W(n)?s=8:(0!==i&&4!=i||(s=0),1!=i&&5!=i||(s=6),2!=i&&6!=i||(s=4),3!=i&&7!=i||(s=2));let a="";for(;!a||!W(a);)i+=s,i>7&&s<8&&(i-=8),i>15&&(i-=16),a=o+l+i.toString(16);return e.symbol=a,I(e)},symbolRotate:(t,e=!0)=>{let o=w(t);if(!o.symbol)return t;if(!W(o.symbol))return t;const l=e?1:-1,i=o.symbol.slice(0,4);let n=o.symbol.slice(4,5),s=parseInt(o.symbol.slice(5,6),16),a="";for(;!a||!W(a);)s>7?(s+=l,s>15&&(s=8),s<8&&(s=15),a=i+n+s.toString(16)):(s-=l,s>7&&(s=0),s<0&&(s=7),a=i+n+s);return o.symbol=a,I(o)},symbolFlop:(t,e=!0)=>{let o=w(t);if(!o.symbol)return t;if(!W(o.symbol))return t;const l=e?1:-1,i=o.symbol.slice(0,4);let n=parseInt(o.symbol.slice(4,5)),s=o.symbol.slice(5,6),a="";for(;!a||!W(a);)n+=l,n>5&&(n=0),n<0&&(n=5),a=i+n+s;return o.symbol=a,I(o)},symbolScroll:(t,e=!0)=>{let o=w(t);if(!o.symbol)return t;if(!W(o.symbol))return t;const l=e?1:-1,i=parseInt(o.symbol.slice(1,4),16)+l,n=o.symbol.slice(4,5),s=o.symbol.slice(5,6),a="S"+i.toString(16)+n+s;return W(a)&&(o.symbol=a),I(o)},signSvgBody:X,signSvg:t=>{let e=z(t);if(e.spatials){let o=D(e.style),l=Math.min(...e.spatials.map((t=>t.coord[0]))),i=Math.min(...e.spatials.map((t=>t.coord[1]))),n=e.max[0],s=e.max[1],a="";o.classes&&(a=` class="${o.classes}"`);let r="";o.id&&(r=` id="${o.id}"`),o.padding&&(l-=o.padding,i-=o.padding,n+=o.padding,s+=o.padding);let d="";"x"!=o.zoom&&(d=` width="${(n-l)*(o.zoom?o.zoom:1)}" height="${(s-i)*(o.zoom?o.zoom:1)}"`);let c=`<svg${a}${r} version="1.1" xmlns="http://www.w3.org/2000/svg"${d} viewBox="${l} ${i} ${n-l} ${s-i}">\n`;return c+=X(t),c+="\n</svg>",c}return'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="1" height="1"></svg>'},signPng:t=>{const e=function(t){const e=z(t);if(e.spatials){const t=document.createElement("canvas"),o=t.getContext("2d");let l=D(e.style);l.detailsym&&l.detailsym.forEach((t=>{e.spatials[t.index-1]&&(e.spatials[t.index-1].detail=t.detail)}));let i=Math.min(...e.spatials.map((t=>t.coord[0]))),n=Math.min(...e.spatials.map((t=>t.coord[1]))),s=e.max[0],a=e.max[1];l.padding&&(i-=l.padding,n-=l.padding,s+=l.padding,a+=l.padding);let r=1;"x"!=l.zoom&&(r=l.zoom);let d=(s-i)*r,c=(a-n)*r;t.width=d||1,t.height=c||1,l.background&&(o.rect(0,0,d,c),o.fillStyle=l.background,o.fill());const m=l.detail&&l.detail[0]||"black",g=l.detail&&l.detail[1]||"white";return e.spatials.forEach((t=>{let e=m;t.detail?e=t.detail[0]:l.colorize&&(e=R(t.symbol));let s=g;t.detail&&t.detail[1]&&(s=t.detail[1]),o.font=30*r+"px 'SuttonSignWritingFill'",o.fillStyle=s,o.fillText(L(t.symbol),(t.coord[0]-i)*r,(t.coord[1]-n)*r),o.font=30*r+"px 'SuttonSignWritingLine'",o.fillStyle=e,o.fillText(A(t.symbol),(t.coord[0]-i)*r,(t.coord[1]-n)*r)})),t}}(t),o=e.toDataURL("image/png");return e.remove(),o},signNormalize:t=>{const e=z(t);if(e.spatials){const t=e.spatials.reduce(((t,e)=>{const o=W(e.symbol);return t[e.symbol]={width:o[0],height:o[1]},t}),{}),o=e=>({x1:Math.min(...e.map((t=>t.coord[0]))),y1:Math.min(...e.map((t=>t.coord[1]))),x2:Math.max(...e.map((e=>e.coord[0]+parseInt(t[e.symbol].width)))),y2:Math.max(...e.map((e=>e.coord[1]+parseInt(t[e.symbol].height))))}),l=F,i=e.spatials.filter((t=>{const e=parseInt(t.symbol.slice(1,4),16);return l[0]<=e&&l[1]>=e})),n=M,s=e.spatials.filter((t=>{const e=parseInt(t.symbol.slice(1,4),16);return n[0]<=e&&n[1]>=e}));let a=o(e.spatials),r=[a.x2,a.y2];if(i.length){const t=o(i);a.x1=t.x1,a.x2=t.x2}if(s.length){const t=o(s);a.y1=t.y1,a.y2=t.y2}const d=[parseInt((a.x2+a.x1)/2)-500,parseInt((a.y2+a.y1)/2)-500];return(e.sequence?"A"+e.sequence.join(""):"")+e.box+(r[0]-d[0])+"x"+(r[1]-d[1])+e.spatials.map((t=>t.symbol+(t.coord[0]-d[0])+"x"+(t.coord[1]-d[1]))).join("")+(e.style||"")}},columnSvg:Y,columnsSvg:function(t,e){"object"!=typeof e&&(e={});let o=j(t,e);return o.columns.map(((t,e)=>Y(t,{...o.options,width:o.widths[e]})))},columnPng:q,columnsPng:function(t,e){"object"!=typeof e&&(e={});let o=j(t,e);return o.columns.map(((t,e)=>q(t,{...o.options,width:o.widths[e]})))}});let N={symbol:"(?:(?:\ud8c0[\udc01-\udfff])|(?:[\ud8c1-\ud8fc][\udc00-\udfff])|(?:\ud8fd[\udc00-\udc80]))",coord:"(?:\ud836[\udc0c-\uddff]){2}",sort:"𝠀",box:"\ud836[\udc01-\udc04]"};N.prefix=`(?:${N.sort}(?:${N.symbol})+)`,N.spatial=`${N.symbol}${N.coord}`,N.signbox=`${N.box}${N.coord}(?:${N.spatial})*`,N.sign=`${N.prefix}?${N.signbox}`,N.sortable=`${N.prefix}${N.signbox}`;let G={colorize:"C",colorhex:"(?:[0-9a-fA-F]{3}){1,2}",colorname:"[a-zA-Z]+",padding:"P[0-9]{2}",zoom:"Z(?:[0-9]+(?:\\.[0-9]+)?|x)",classbase:"-?[_a-zA-Z][_a-zA-Z0-9-]{0,100}",id:"[a-zA-Z][_a-zA-Z0-9-]{0,100}"};G.colorbase=`(?:${G.colorhex}|${G.colorname})`,G.color=`_${G.colorbase}_`,G.colors=`_${G.colorbase}(?:,${G.colorbase})?_`,G.background=`G${G.color}`,G.detail=`D${G.colors}`,G.detailsym=`D[0-9]{2}${G.colors}`,G.classes=`${G.classbase}(?: ${G.classbase})*`,G.full=`-(${G.colorize})?(${G.padding})?(${G.background})?(${G.detail})?(${G.zoom})?(?:-((?:${G.detailsym})*))?(?:-(${G.classes})?!(?:(${G.id})!)?)?`;const H=t=>(new RegExp(`^${G.colorhex}$`).test(t)?"#":"")+t,J=t=>{const e=`^${G.full}`,o=("string"==typeof t?t.match(new RegExp(e)):[])||[];return l={colorize:o[1]?!!o[1]:void 0,padding:o[2]?parseInt(o[2].slice(1)):void 0,background:o[3]?H(o[3].slice(2,-1)):void 0,detail:o[4]?o[4].slice(2,-1).split(",").map(H):void 0,zoom:o[5]?"Zx"===o[5]?"x":parseFloat(o[5].slice(1)):void 0,detailsym:o[6]?o[6].match(new RegExp(G.detailsym,"g")).map((t=>{const e=t.split("_"),o=e[1].split(",").map(H);return{index:parseInt(e[0].slice(1)),detail:o}})):void 0,classes:o[7]?o[7]:void 0,id:o[8]?o[8]:void 0},Object.fromEntries(Object.entries(l).filter((([t,e])=>void 0!==e)));var l},K=t=>parseInt(t.codePointAt(0))-120844+250,Q=t=>[K(t.slice(0,2)),K(t.slice(2,4))],V=t=>t.map((t=>(t=>String.fromCodePoint(120844+parseInt(t)-250))(t))).join(""),tt=t=>{const e=`^(${N.symbol})(${N.coord})?(${G.full})?`,o="string"==typeof t?t.match(new RegExp(e)):void 0;return{symbol:o?o[1]:void 0,coord:o&&o[2]?Q(o[2]):void 0,style:o?o[3]:void 0}},et=t=>{const e=`^(${N.prefix})?(${N.signbox})(${G.full})?`,o="string"==typeof t?t.match(new RegExp(e)):void 0;return o?{sequence:o[1]?o[1].slice(2).match(/.{2}/g):void 0,box:o[2].slice(0,2),max:Q(o[2].slice(2,6)),spatials:o[2].length<7?void 0:o[2].slice(6).match(/(.{6})/g).map((t=>({symbol:t.slice(0,2),coord:Q(t.slice(2))}))),style:o[3]}:{}},ot=t=>{if("string"!=typeof t)return[];const e=`(${N.sign}(${G.full})?|${N.spatial}(${G.full})?)`,o=t.match(new RegExp(e,"g"));return o?[...o]:[]},lt=t=>{if("object"==typeof t&&null!==t&&"string"==typeof t.symbol){const e=(t.symbol.match(N.symbol)||[""])[0];if(e){const o=t.coord&&t.coord[0]||"",l=t.coord&&t.coord[1]||"";return e+(o&&l?V([o,l]):"")+("string"==typeof t.style&&(t.style.match(G.full)||[""])[0]||"")}}},it=t=>{let e,o,l,i,n,s,a,r,d=et(t);d.spatials?(i=Math.min(...d.spatials.map((t=>t.coord[0]))),n=d.max[0],e=n-i,s=Math.min(...d.spatials.map((t=>t.coord[1]))),a=d.max[1],o=a-s,l="sign",r=d.box):(d=tt(t),r="𝠃",d.coord?(i=d.coord[0],e=2*(500-i),s=d.coord[1],o=2*(500-s),l="symbol"):(i=490,e=20,s=490,o=20,l="none"));let c=J(d.style),m=c.zoom||1,g=c.padding||0;return{minX:i,minY:s,width:e,height:o,segment:l,lane:{"𝠁":0,"𝠂":-1,"𝠃":0,"𝠄":1}[r],padding:g,zoom:m}},nt={height:500,width:150,offset:50,pad:20,margin:5,dynamic:!1,background:void 0,punctuation:{spacing:!0,pad:30,pull:!0},style:{detail:["black","white"],zoom:1}},st=(t,e)=>{if("string"!=typeof t)return{};const o=(t=>("object"!=typeof t&&(t={}),{...nt,...t,punctuation:{...nt.punctuation,...t.punctuation},style:{...nt.style,...t.style}}))(e);let l=ot(t),i=0,n=[],s=[],a=0,r=parseInt(o.width/2),d=o.height-o.margin,c=!0,m=!1;for(let t of l){let e=it(t);i+=a,o.punctuation.spacing?i+="sign"==e.segment?o.pad:0:i+=o.pad,m=i+e.height>d,m&&"symbol"==e.segment&&o.punctuation.pull&&c&&(m=!1,c=!1),0==s.length&&(m=!1),m&&(i=o.pad,n.push(s),s=[],c=!0),s.push(Object.assign(e,{x:r+o.offset*e.lane-(500-e.minX)*e.zoom*o.style.zoom,y:i,text:t})),i+=e.height*e.zoom*o.style.zoom,a=o.punctuation.spacing?"sign"==e.segment?o.pad:o.punctuation.pad:o.pad}if(s.length&&n.push(s),o.punctuation.pull)for(let t of n){let e=t[t.length-1],l=e.y+e.height-(o.height-o.margin);if(l>0){let e=parseInt(l/t.length)+1;for(let o in t)t[o].y-=e*o+e}}let g=[];for(let t of n){let e=[r-o.offset-o.pad],l=[r+o.offset+o.pad];for(let i of t)e.push(i.x-o.pad),l.push(i.x+i.width+o.pad);e=Math.min(...e),l=Math.max(...l);let i=o.width,n=0;o.dynamic?(i=l-e,n=-e):n=r-parseInt((e+l)/2);for(let e of t)e.x+=n;g.push(i)}return{options:o,widths:g,columns:n}},at=[262145,287201,310433,311201,321761,323489,324257],rt=[311201,321760],dt=[311201,322624],ct=["#0000CC","#CC0000","#FF0099","#006600","#000000","#884411","#FF9900"],mt=t=>{const e=tt(t);let o="#000000";if(e.symbol){const t=(t=>parseInt(t.codePointAt(0)))(e.symbol),l=at.findIndex((e=>e>t));o=ct[l<0?6:l-1]}return o},gt=function(t){if(tt(t).symbol)return i(p(t))},pt=function(t){return n(p(t))},ft=function(t){return s(p(t))},yt=function(t){return a(p(t))},ut=t=>{const e=tt(t);if(!e.symbol)return"";let o,l,i,n,s=D(e.style);if(e.coord)o=e.coord[0],l=e.coord[1],i=500-o+500,n=500-l+500;else{let t=gt(e.symbol);if(!t)return"";o=500-parseInt((t[0]+1)/2),l=500-parseInt((t[1]+1)/2),i=500-o+500,n=500-l+500}let a,r=yt(e.symbol);r=`  <g transform="translate(${o},${l})">\n${r}\n  </g>`,s.colorize?a=mt(e.symbol):s.detail&&(a=s.detail[0]),a&&(r=r.replace(/class="sym-line" fill="black"/,`class="sym-line" fill="${a}"`));let d=s.detail&&s.detail[1];d&&(r=r.replace(/class="sym-fill" fill="white"/,`class="sym-fill" fill="${d}"`));let c="";return s.padding&&(o-=s.padding,l-=s.padding,i+=s.padding,n+=s.padding),s.background&&(c=`\n  <rect x="${o}" y="${l}" width="${i-o}" height="${n-l}" style="fill:${s.background};" />`),`  <text font-size="0">${t}</text>${c}\n${r}`},bt=t=>{let e=et(t);if(e.spatials){let o=D(e.style);o.detailsym&&o.detailsym.forEach((t=>{e.spatials[t.index-1]&&(e.spatials[t.index-1].detail=t.detail)}));let l=Math.min(...e.spatials.map((t=>t.coord[0]))),i=Math.min(...e.spatials.map((t=>t.coord[1]))),n=e.max[0],s=e.max[1],a="";o.padding&&(l-=o.padding,i-=o.padding,n+=o.padding,s+=o.padding),o.background&&(a=`\n  <rect x="${l}" y="${i}" width="${n-l}" height="${s-i}" style="fill:${o.background};" />`);let r=`  <text font-size="0">${t}</text>${a}`;const d=o.detail&&o.detail[0],c=o.detail&&o.detail[1];return r+="\n"+e.spatials.map((t=>{let e=yt(t.symbol),l=d;t.detail?l=t.detail[0]:o.colorize&&(l=mt(t.symbol)),l&&(e=e.replace(/class="sym-line" fill="black"/,`class="sym-line" fill="${l}"`));let i=c;return t.detail&&t.detail[1]&&(i=t.detail[1]),i&&(e=e.replace(/class="sym-fill" fill="white"/,`class="sym-fill" fill="${i}"`)),`  <g transform="translate(${t.coord[0]},${t.coord[1]})">\n${e}\n  </g>`})).join("\n"),r}return""},ht=(t,e)=>{"object"!=typeof e&&(e={});const o=Object.assign(nt,e);let l=o.width,i=o.height,n="";o.background&&(n=`\n  <rect x="0" y="0" width="${l-0}" height="${i-0}" style="fill:${o.background};" />`);let s=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg"${` width="${o.width}" height="${o.height}"`} viewBox="0 0 ${l-0} ${i-0}">\n  <text font-size="0">0</text>${n}`;return s+=t.map((t=>{const e=t.text.indexOf("-");if(e>0){const l=t.text.substring(e),i={...o.style,...D(l)};t.text=t.text.replace(l,T(i))}else t.text+=T(o.style);return t.zoom=t.zoom*o.style.zoom,'<g transform="translate('+t.x+","+t.y+") scale("+t.zoom+") translate("+-t.minX+","+-t.minY+') ">'+("sign"==t.segment?bt(t.text):ut(t.text))+"</g>"})).join("\n"),s+="\n</svg>",s},xt=(t,e)=>{const o=function(t,e){"object"!=typeof e&&(e={});const o=Object.assign(nt,e),l=document.createElement("canvas");l.width=o.width,l.height=o.height;const i=l.getContext("2d");return o.background&&(i.rect(0,0,o.width,o.height),i.fillStyle=o.background,i.fill()),t.map((t=>{const e=t.text.indexOf("-");if(e>0){const l=t.text.substring(e),i={...o.style,...D(l)};t.text=t.text.replace(l,T(i))}else t.text+=T(o.style);t.zoom=t.zoom*o.style.zoom;let l={};if("sign"==t.segment)l=et(t.text);else{let e=tt(t.text);l.style=e.style,l.spatials=[e]}let n=D(l.style);n.background&&(i.fillStyle=n.background,i.fillRect(t.x-n.padding*t.zoom,t.y-n.padding*t.zoom,(t.width+2*n.padding)*t.zoom,(t.height+2*n.padding)*t.zoom)),n.detailsym&&n.detailsym.forEach((t=>{l.spatials[t.index-1]&&(l.spatials[t.index-1].detail=t.detail)}));const s=n.detail&&n.detail[0]||"black",a=n.detail&&n.detail[1]||"white";l.spatials.forEach((e=>{let o=s;e.detail?o=e.detail[0]:n.colorize&&(o=mt(e.symbol));let l=a;e.detail&&e.detail[1]&&(l=e.detail[1]),i.font=30*t.zoom+"px 'SuttonSignWritingFill'",i.fillStyle=l,i.fillText(ft(e.symbol),t.x+(e.coord[0]-t.minX)*t.zoom,t.y+(e.coord[1]-t.minY)*t.zoom),i.font=30*t.zoom+"px 'SuttonSignWritingLine'",i.fillStyle=o,i.fillText(pt(e.symbol),t.x+(e.coord[0]-t.minX)*t.zoom,t.y+(e.coord[1]-t.minY)*t.zoom)}))})),l}(t,e),l=o.toDataURL("image/png");return o.remove(),l};var $t=Object.freeze({__proto__:null,symbolSize:gt,symbolLine:pt,symbolFill:ft,symbolText:yt,symbolSvgBody:ut,symbolSvg:t=>{const e=tt(t),o='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="1" height="1"></svg>';if(!e.symbol)return o;let l,i,n,s,a=D(e.style);if(e.coord)l=e.coord[0],i=e.coord[1],n=500-l+500,s=500-i+500;else{let t=gt(e.symbol);if(!t)return o;l=parseInt(500-t[0]/2),i=parseInt(500-t[1]/2),n=l+t[0],s=i+t[1]}let r="";a.classes&&(r=` class="${a.classes}"`);let d="";a.id&&(d=` id="${a.id}"`),a.padding&&(l-=a.padding,i-=a.padding,n+=a.padding,s+=a.padding);let c="";return"x"!=a.zoom&&(c=` width="${(n-l)*(a.zoom?a.zoom:1)}" height="${(s-i)*(a.zoom?a.zoom:1)}"`),`<svg${r}${d} version="1.1" xmlns="http://www.w3.org/2000/svg"${c} viewBox="${l} ${i} ${n-l} ${s-i}">\n${ut(t)}\n</svg>`},symbolPng:t=>{const e=function(t){const e=tt(t);if(e.symbol){let t=gt(e.symbol);if(t){const o=document.createElement("canvas"),l=o.getContext("2d");let i=D(e.style),n="black";i.colorize?n=mt(e.symbol):i.detail&&(n=i.detail[0]);let s=i.detail&&i.detail[1]||"white",a=500,r=a+t[0],d=500,c=d+t[1];i.padding&&(a-=i.padding,d-=i.padding,r+=i.padding,c+=i.padding);let m=1;"x"!=i.zoom&&(m=i.zoom);let g=(r-a)*m,p=(c-d)*m;return o.width=g||1,o.height=p||1,i.background&&(l.rect(0,0,g,p),l.fillStyle=i.background,l.fill()),l.font=30*m+"px 'SuttonSignWritingFill'",l.fillStyle=s,l.fillText(ft(e.symbol),(500-a)*m,(500-d)*m),l.font=30*m+"px 'SuttonSignWritingLine'",l.fillStyle=n,l.fillText(pt(e.symbol),(500-a)*m,(500-d)*m),o}}}(t),o=e.toDataURL("image/png");return e.remove(),o},symbolNormalize:t=>{const e=tt(t);if(!e.symbol)return null;{let t=gt(e.symbol);if(t)return`${e.symbol}${m([500-parseInt((t[0]+1)/2),500-parseInt((t[1]+1)/2)])}${e.style||""}`}},symbolMirror:t=>{let e=tt(t);if(!e.symbol)return t;if(!gt(e.symbol))return t;e.symbol=y(e.symbol);const o=e.symbol.slice(0,4);let l=e.symbol.slice(4,5),i=parseInt(e.symbol.slice(5,6),16);const n=o+"18";var s;gt(u(o+"08"))||gt(u(n))?s=8:(0!==i&&4!=i||(s=0),1!=i&&5!=i||(s=6),2!=i&&6!=i||(s=4),3!=i&&7!=i||(s=2));let a="";for(;!a||!gt(u(a));)i+=s,i>7&&s<8&&(i-=8),i>15&&(i-=16),a=o+l+i.toString(16);return e.symbol=u(a),lt(e)},symbolRotate:(t,e=!0)=>{let o=tt(t);if(!o.symbol)return t;if(!gt(o.symbol))return t;o.symbol=y(o.symbol);const l=e?1:-1,i=o.symbol.slice(0,4);let n=o.symbol.slice(4,5),s=parseInt(o.symbol.slice(5,6),16),a="";for(;!a||!gt(u(a));)s>7?(s+=l,s>15&&(s=8),s<8&&(s=15),a=i+n+s.toString(16)):(s-=l,s>7&&(s=0),s<0&&(s=7),a=i+n+s);return o.symbol=u(a),lt(o)},symbolFlop:(t,e=!0)=>{let o=tt(t);if(!o.symbol)return t;if(!gt(o.symbol))return t;o.symbol=y(o.symbol);const l=e?1:-1,i=o.symbol.slice(0,4);let n=parseInt(o.symbol.slice(4,5)),s=o.symbol.slice(5,6),a="";for(;!a||!gt(u(a));)n+=l,n>5&&(n=0),n<0&&(n=5),a=i+n+s;return o.symbol=u(a),lt(o)},symbolScroll:(t,e=!0)=>{let o=tt(t);if(!o.symbol)return t;if(!gt(o.symbol))return t;o.symbol=y(o.symbol);const l=e?1:-1,i=parseInt(o.symbol.slice(1,4),16)+l,n=o.symbol.slice(4,5),s=o.symbol.slice(5,6),a="S"+i.toString(16)+n+s;return 6==a.length&&gt(u(a))&&(o.symbol=a),o.symbol=u(o.symbol),lt(o)},signSvgBody:bt,signSvg:t=>{let e=et(t);if(e.spatials){let o=D(e.style),l=Math.min(...e.spatials.map((t=>t.coord[0]))),i=Math.min(...e.spatials.map((t=>t.coord[1]))),n=e.max[0],s=e.max[1],a="";o.classes&&(a=` class="${o.classes}"`);let r="";o.id&&(r=` id="${o.id}"`),o.padding&&(l-=o.padding,i-=o.padding,n+=o.padding,s+=o.padding);let d="";"x"!=o.zoom&&(d=` width="${(n-l)*(o.zoom?o.zoom:1)}" height="${(s-i)*(o.zoom?o.zoom:1)}"`);let c=`<svg${a}${r} version="1.1" xmlns="http://www.w3.org/2000/svg"${d} viewBox="${l} ${i} ${n-l} ${s-i}">\n`;return c+=bt(t),c+="\n</svg>",c}return'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="1" height="1"></svg>'},signPng:t=>{const e=function(t){const e=et(t);if(e.spatials){const t=document.createElement("canvas"),o=t.getContext("2d");let l=D(e.style);l.detailsym&&l.detailsym.forEach((t=>{e.spatials[t.index-1]&&(e.spatials[t.index-1].detail=t.detail)}));let i=Math.min(...e.spatials.map((t=>t.coord[0]))),n=Math.min(...e.spatials.map((t=>t.coord[1]))),s=e.max[0],a=e.max[1];l.padding&&(i-=l.padding,n-=l.padding,s+=l.padding,a+=l.padding);let r=1;"x"!=l.zoom&&(r=l.zoom);let d=(s-i)*r,c=(a-n)*r;t.width=d||1,t.height=c||1,l.background&&(o.rect(0,0,d,c),o.fillStyle=l.background,o.fill());const m=l.detail&&l.detail[0]||"black",g=l.detail&&l.detail[1]||"white";return e.spatials.forEach((t=>{let e=m;t.detail?e=t.detail[0]:l.colorize&&(e=mt(t.symbol));let s=g;t.detail&&t.detail[1]&&(s=t.detail[1]),o.font=30*r+"px 'SuttonSignWritingFill'",o.fillStyle=s,o.fillText(ft(t.symbol),(t.coord[0]-i)*r,(t.coord[1]-n)*r),o.font=30*r+"px 'SuttonSignWritingLine'",o.fillStyle=e,o.fillText(pt(t.symbol),(t.coord[0]-i)*r,(t.coord[1]-n)*r)})),t}}(t),o=e.toDataURL("image/png");return e.remove(),o},signNormalize:t=>{const e=et(t);if(e.spatials){const t=e.spatials.reduce(((t,e)=>{const o=gt(e.symbol);return t[e.symbol]={width:o[0],height:o[1]},t}),{}),o=e=>({x1:Math.min(...e.map((t=>t.coord[0]))),y1:Math.min(...e.map((t=>t.coord[1]))),x2:Math.max(...e.map((e=>e.coord[0]+parseInt(t[e.symbol].width)))),y2:Math.max(...e.map((e=>e.coord[1]+parseInt(t[e.symbol].height))))}),l=rt,i=e.spatials.filter((t=>{const e=parseInt(t.symbol.slice(1,4),16);return l[0]<=e&&l[1]>=e})),n=dt,s=e.spatials.filter((t=>{const e=parseInt(t.symbol.slice(1,4),16);return n[0]<=e&&n[1]>=e}));let a=o(e.spatials),r=[a.x2,a.y2];if(i.length){const t=o(i);a.x1=t.x1,a.x2=t.x2}if(s.length){const t=o(s);a.y1=t.y1,a.y2=t.y2}const d=[parseInt((a.x2+a.x1)/2)-500,parseInt((a.y2+a.y1)/2)-500];return(e.sequence?"𝠀"+e.sequence.join(""):"")+e.box+m([r[0]-d[0],r[1]-d[1]])+e.spatials.map((t=>t.symbol+m([t.coord[0]-d[0],t.coord[1]-d[1]]))).join("")+(e.style||"")}},columnSvg:ht,columnsSvg:function(t,e){"object"!=typeof e&&(e={});let o=st(t,e);return o.columns.map(((t,e)=>ht(t,{...o.options,width:o.widths[e]})))},columnPng:xt,columnsPng:function(t,e){"object"!=typeof e&&(e={});let o=st(t,e);return o.columns.map(((t,e)=>xt(t,{...o.options,width:o.widths[e]})))}});t.font=c,t.fsw=U,t.swu=$t,Object.defineProperty(t,"__esModule",{value:!0})}));
